{"ast":null,"code":"import _regeneratorRuntime from\"/Users/tidomontana/react/react-expense-tracker/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/tidomontana/react/react-expense-tracker/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/tidomontana/react/react-expense-tracker/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{createContext,useReducer}from\"react\";import{AppReducer}from\"./AppReducer\";import{ACTION}from\"./Actions\";import{jsx as _jsx}from\"react/jsx-runtime\";var initialState={transactions:[],loading:true,error:[]};export var GlobalContext=/*#__PURE__*/createContext(initialState);export function GlobalProvider(_ref){var children=_ref.children;var _useReducer=useReducer(AppReducer,initialState),_useReducer2=_slicedToArray(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];//Actions\nfunction addTransaction(){fetch('/api/v1/transactions').then(function(res){return res.json();}).then(function(data){return dispatch({type:ACTION.GET_TRANS,payload:{data:data.data}});}).catch(function(err){return console.log(err);});}function deleteTransaction(_x){return _deleteTransaction.apply(this,arguments);}function _deleteTransaction(){_deleteTransaction=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(id){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(\"/api/v1/transactions/\".concat(id),{method:\"DELETE\"});case 3:_context.next=8;break;case 5:_context.prev=5;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 8:dispatch({type:ACTION.DELETE_TRANS,payload:{id:id}});case 9:case\"end\":return _context.stop();}}},_callee,null,[[0,5]]);}));return _deleteTransaction.apply(this,arguments);}function postTransaction(_x2){return _postTransaction.apply(this,arguments);}function _postTransaction(){_postTransaction=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(transactions){var res,data;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return fetch(\"/api/v1/transactions/\",{method:\"POST\",headers:{'Content-Type':'application/json'},body:JSON.stringify(transactions)});case 3:res=_context2.sent;_context2.next=6;return res.json();case 6:data=_context2.sent;console.log('Data',data);if(!(transactions.text===\"\")){_context2.next=10;break;}return _context2.abrupt(\"return\",window.alert(data.message));case 10:dispatch({type:ACTION.POST_TRANS,payload:{transactions:data.data}});_context2.next=17;break;case 13:_context2.prev=13;_context2.t0=_context2[\"catch\"](0);window.alert(_context2.t0);console.log(_context2.t0);case 17:case\"end\":return _context2.stop();}}},_callee2,null,[[0,13]]);}));return _postTransaction.apply(this,arguments);}return/*#__PURE__*/_jsx(GlobalContext.Provider,{value:{transactions:state.transactions,loading:state.loading,deleteTransaction:deleteTransaction,postTransaction:postTransaction,addTransaction:addTransaction,error:state.error},children:children});}","map":{"version":3,"names":["createContext","useReducer","AppReducer","ACTION","initialState","transactions","loading","error","GlobalContext","GlobalProvider","children","state","dispatch","addTransaction","fetch","then","res","json","data","type","GET_TRANS","payload","catch","err","console","log","deleteTransaction","id","method","DELETE_TRANS","postTransaction","headers","body","JSON","stringify","text","window","alert","message","POST_TRANS"],"sources":["/Users/tidomontana/react/react-expense-tracker/client/src/context/GlobalState.js"],"sourcesContent":["import { createContext, useReducer } from \"react\"\nimport { AppReducer } from \"./AppReducer\"\nimport { ACTION } from \"./Actions\"\n\nconst initialState = {\n    transactions: [],\n    loading: true,\n    error: []\n}\n\n\n\nexport const GlobalContext = createContext(initialState)\n\n\nexport function GlobalProvider({children}){\n\n    const [state, dispatch] = useReducer(AppReducer, initialState)\n\n\n    //Actions\n\n    function addTransaction(){\n     fetch('/api/v1/transactions')\n\n        .then(res => res.json())\n        .then(data => dispatch({\n            type: ACTION.GET_TRANS,\n            payload: {\n                data: data.data\n            }\n        }))\n        .catch(err => console.log(err))\n    }\n\n\n\n  async function deleteTransaction(id){\n    \n    try {\n       await fetch(`/api/v1/transactions/${id}`,{\n            method: \"DELETE\"\n        })\n    } catch (error) {\n        console.log(error)\n    }\n\n\n    dispatch({\n        type: ACTION.DELETE_TRANS,\n        payload: {\n            id\n        }\n    })\n  }\n\n async function postTransaction(transactions){\n   \n    try {\n    const res = await fetch(`/api/v1/transactions/`,{\n                method: \"POST\",\n                headers: {\n                    'Content-Type':'application/json'\n                },\n                body: JSON.stringify(transactions)\n               \n            })\n           \n            const data = await res.json()\n            console.log('Data',data)\n\n            if(transactions.text === \"\") return window.alert(data.message)\n\n            dispatch({\n                type: ACTION.POST_TRANS,\n                payload: {\n                   transactions: data.data\n                }\n            })\n          \n        \n\n         } catch (error) {\n        \n         window.alert(error)\n         console.log(error)\n     }}\n\n\n\n  \n\n\nreturn(\n\n    \n    <GlobalContext.Provider value={{\n        transactions: state.transactions,\n        loading: state.loading,\n        deleteTransaction,\n        postTransaction,\n        addTransaction,\n        error: state.error\n    }}>\n        {children}\n    </GlobalContext.Provider>\n\n)\n }"],"mappings":"ibAAA,OAASA,aAAa,CAAEC,UAAU,KAAQ,OAAO,CACjD,OAASC,UAAU,KAAQ,cAAc,CACzC,OAASC,MAAM,KAAQ,WAAW,4CAElC,GAAMC,aAAY,CAAG,CACjBC,YAAY,CAAE,EAAE,CAChBC,OAAO,CAAE,IAAI,CACbC,KAAK,CAAE,EACX,CAAC,CAID,MAAO,IAAMC,cAAa,cAAGR,aAAa,CAACI,YAAY,CAAC,CAGxD,MAAO,SAASK,eAAc,MAAY,IAAVC,SAAQ,MAARA,QAAQ,CAEpC,gBAA0BT,UAAU,CAACC,UAAU,CAAEE,YAAY,CAAC,4CAAvDO,KAAK,iBAAEC,QAAQ,iBAGtB;AAEA,QAASC,eAAc,EAAE,CACxBC,KAAK,CAAC,sBAAsB,CAAC,CAEzBC,IAAI,CAAC,SAAAC,GAAG,QAAIA,IAAG,CAACC,IAAI,EAAE,GAAC,CACvBF,IAAI,CAAC,SAAAG,IAAI,QAAIN,SAAQ,CAAC,CACnBO,IAAI,CAAEhB,MAAM,CAACiB,SAAS,CACtBC,OAAO,CAAE,CACLH,IAAI,CAAEA,IAAI,CAACA,IACf,CACJ,CAAC,CAAC,GAAC,CACFI,KAAK,CAAC,SAAAC,GAAG,QAAIC,QAAO,CAACC,GAAG,CAACF,GAAG,CAAC,GAAC,CACnC,CAAC,QAIYG,kBAAiB,iKAAhC,iBAAiCC,EAAE,0JAGxBb,MAAK,gCAAyBa,EAAE,EAAG,CACpCC,MAAM,CAAE,QACZ,CAAC,CAAC,sFAEFJ,OAAO,CAACC,GAAG,aAAO,QAItBb,QAAQ,CAAC,CACLO,IAAI,CAAEhB,MAAM,CAAC0B,YAAY,CACzBR,OAAO,CAAE,CACLM,EAAE,CAAFA,EACJ,CACJ,CAAC,CAAC,oEACH,4DAEaG,gBAAe,4JAA9B,kBAA+BzB,YAAY,6KAGtBS,MAAK,yBAAyB,CACpCc,MAAM,CAAE,MAAM,CACdG,OAAO,CAAE,CACL,cAAc,CAAC,kBACnB,CAAC,CACDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC7B,YAAY,CAErC,CAAC,CAAC,QAPJW,GAAG,uCASkBA,IAAG,CAACC,IAAI,EAAE,QAAvBC,IAAI,gBACVM,OAAO,CAACC,GAAG,CAAC,MAAM,CAACP,IAAI,CAAC,MAErBb,YAAY,CAAC8B,IAAI,GAAK,EAAE,6DAASC,MAAM,CAACC,KAAK,CAACnB,IAAI,CAACoB,OAAO,CAAC,UAE9D1B,QAAQ,CAAC,CACLO,IAAI,CAAEhB,MAAM,CAACoC,UAAU,CACvBlB,OAAO,CAAE,CACNhB,YAAY,CAAEa,IAAI,CAACA,IACtB,CACJ,CAAC,CAAC,sFAMLkB,MAAM,CAACC,KAAK,cAAO,CACnBb,OAAO,CAACC,GAAG,cAAO,wEACpB,kDAOP,mBAGI,KAAC,aAAa,CAAC,QAAQ,EAAC,KAAK,CAAE,CAC3BpB,YAAY,CAAEM,KAAK,CAACN,YAAY,CAChCC,OAAO,CAAEK,KAAK,CAACL,OAAO,CACtBoB,iBAAiB,CAAjBA,iBAAiB,CACjBI,eAAe,CAAfA,eAAe,CACfjB,cAAc,CAAdA,cAAc,CACdN,KAAK,CAAEI,KAAK,CAACJ,KACjB,CAAE,UACGG,QAAQ,EACY,CAG5B"},"metadata":{},"sourceType":"module","externalDependencies":[]}